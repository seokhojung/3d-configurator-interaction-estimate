story: 1.13
epic: 1
title: FR4 Schema→PDF Field Mapping Validation/Rendering (stub)
status: PASS
reviewed_by: QA Quinn
date: 2025-10-31
summary: |
  스키마의 pdf_field_name에 따른 필드 매핑 검증을 서버단에 통합하여,
  필수 누락/중복/타입 오류를 422(details 포함)로 일관되게 반환하고,
  정상 경로에서는 스텁 기반 pdf_base64를 200으로 반환함을 확인했다.
details:
  acceptance_criteria:
    - id: AC1
      result: PASS
      note: 매핑 일치 시 정상 응답(200) 및 결과 생성 확인
    - id: AC2
      result: PASS
      note: 필수 누락 시 422와 details.missing 제공 검증
    - id: AC3
      result: PASS
      note: 에러 계약 `{ code, message, details? }` 준수 및 한국어 메시지 체계와 정합 유지
    - id: AC4
      result: PASS
      note: Unit(매핑 유틸) + Integration(200/422) 테스트로 커버; E2E는 선택으로 유지
    - id: AC5
      result: PASS
      note: 문서 앵커 검사 통과
risks:
  - 템플릿별 고급 스키마(중첩/배열) 도입 시 검증 로직 확장 필요
  - 렌더링은 스텁 단계로 실제 PDF 필드 삽입은 후속 스토리에서 심화 필요
evidence:
  unit: tests/unit/pdf/mapping.spec.ts
  integration: tests/integration/pdf/pdf-generate-mapping.int.spec.ts
  code: src/lib/pdf/mapping.ts, src/api/pdf-generate.ts
